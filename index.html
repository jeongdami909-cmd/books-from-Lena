<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lena's Library</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
:root {
  /* ë°°ê²½ìƒ‰: ì€ì€í•œ ì›œí™”ì´íŠ¸(ì•„ì´ë³´ë¦¬) ëŠë‚Œ ìœ ì§€ */
  --bg-color: #fdfdf6; 
  /* í¬ì¸íŠ¸ ìƒ‰ìƒ: ì±… í‘œì§€ì˜ íŒŒë€ìƒ‰(Deep Blue) */
  --accent-blue: #003f7f;
  --text-main: #222222;
  --text-muted: #666666;
  --border-color: #eeeeee;
}

* { margin:0; padding:0; box-sizing:border-box; }
body { font-family: 'Noto Sans KR', sans-serif; background: var(--bg-color); color: var(--text-main); min-height: 100vh; padding-bottom: 80px; }

/* í—¤ë” ìŠ¤íƒ€ì¼ */
.site-header { text-align: center; padding: 50px 20px 30px; display: flex; flex-direction: column; align-items: center; }
.profile-pic { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-bottom: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
.site-title { font-family:'Playfair Display', serif; font-size: 2.5rem; font-weight:700; color: var(--accent-blue); margin-bottom: 8px; }
.site-subtitle { font-size: 0.9rem; color: var(--text-muted); font-weight: 300; max-width: 500px; margin: 0 auto 20px; line-height: 1.6; }

/* ğŸ’¡ ì‘ê³  ì„¸ë ¨ëœ êµ¬ê¸€ ê²€ìƒ‰ì°½ ì¶”ê°€ */
.google-search-container { width: 100%; max-width: 320px; margin-bottom: 25px; }
.google-search-form { 
    display: flex; align-items: center; background: white; border-radius: 50px; 
    padding: 6px 15px; box-shadow: 0 4px 10px rgba(0, 63, 127, 0.08); 
    border: 1px solid var(--border-color); transition: 0.3s;
}
.google-search-form:focus-within { border-color: var(--accent-blue); box-shadow: 0 4px 12px rgba(0, 63, 127, 0.15); }
.google-search-form button { background: none; border: none; font-size: 1rem; cursor: pointer; color: #888; padding: 0; margin-right: 8px; }
.google-search-form input { flex: 1; border: none; outline: none; background: transparent; font-family: 'Noto Sans KR', sans-serif; font-size: 0.85rem; color: var(--text-main); }
.google-search-form input::placeholder { color: #bbb; }

.btn-new { background: transparent; border: 1px solid var(--accent-blue); color: var(--accent-blue); padding: 8px 24px; border-radius: 50px; cursor: pointer; font-size: 0.85rem; transition: 0.3s; }
.btn-new:hover { background: var(--accent-blue); color: white; }

/* ì±…ì¥ ê·¸ë¦¬ë“œ ìŠ¤íƒ€ì¼ */
.container { max-width: 1000px; margin: 0 auto; padding: 0 20px; }
.book-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 40px 25px; }

.book-card { cursor: pointer; display: flex; flex-direction: column; align-items: center; text-align: center; transition: transform 0.2s ease; }
.book-card:hover { transform: translateY(-5px); }
.book-cover { width: 100%; aspect-ratio: 2 / 3; object-fit: cover; border-radius: 2px 6px 6px 2px; box-shadow: -2px 0 5px rgba(0,0,0,0.05), 5px 5px 15px rgba(0,0,0,0.1); margin-bottom: 15px; background: #eee; }
.book-title { font-size: 0.95rem; font-weight: 700; line-height: 1.3; margin-bottom: 5px; word-break: keep-all; color: var(--text-main); }
.book-author { font-size: 0.8rem; color: var(--text-muted); }

/* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
.modal-overlay { display: none; position: fixed; inset: 0; background: rgba(255,255,255,0.95); z-index: 1000; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(5px); }
.modal-overlay.open { display: flex; }
.modal-content { background: white; width: 100%; max-width: 600px; max-height: 90vh; overflow-y: auto; padding: 40px; border-radius: 16px; box-shadow: 0 20px 50px rgba(0,0,0,0.1); position: relative; border: 1px solid var(--border-color); }
.close-btn { position: absolute; top: 20px; right: 25px; font-size: 1.5rem; cursor: pointer; color: var(--text-muted); background: none; border: none; }

/* ìƒì„¸ ë³´ê¸° ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
.detail-layout { display: flex; flex-direction: column; align-items: center; text-align: center; }
.detail-cover { width: 160px; aspect-ratio: 2/3; object-fit: cover; border-radius: 2px 6px 6px 2px; box-shadow: 5px 10px 20px rgba(0,0,0,0.15); margin-bottom: 25px; }
.detail-title { font-family:'Playfair Display', serif; font-size: 2rem; font-weight: 700; margin-bottom: 5px; color: var(--text-main); }
.detail-author { font-size: 1rem; color: var(--text-muted); margin-bottom: 30px; }

.section-title { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 2px; color: var(--text-muted); margin-bottom: 10px; font-weight: 700; }
.detail-quote { font-family:'Playfair Display', serif; font-size: 1.1rem; font-style: italic; line-height: 1.8; color: var(--accent-blue); margin-bottom: 30px; position: relative; padding: 0 20px; }
.detail-review { font-size: 0.95rem; line-height: 1.8; color: #444; text-align: left; width: 100%; border-top: 1px solid var(--border-color); padding-top: 30px; white-space: pre-wrap; }

.detail-actions { margin-top: 40px; display: flex; gap: 10px; width: 100%; justify-content: center; border-top: 1px solid var(--border-color); padding-top: 20px; }
.action-btn { background: #f5f5f5; border: none; padding: 10px 20px; border-radius: 6px; font-size: 0.85rem; cursor: pointer; color: var(--text-main); font-weight: 500; transition: 0.2s; }
.action-btn:hover { background: #e0e0e0; }
.action-btn.delete { color: #e74c3c; }

/* ì…ë ¥/ìˆ˜ì • í¼ ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
.form-group { margin-bottom: 20px; text-align: left; }
.form-group label { display: block; font-size: 0.8rem; font-weight: 700; color: var(--text-muted); margin-bottom: 8px; }
.form-group input, .form-group textarea { width: 100%; padding: 12px 15px; border: 1px solid var(--border-color); border-radius: 8px; font-family: inherit; font-size: 0.95rem; outline: none; background: #fafafa; }
.form-group input:focus, .form-group textarea:focus { border-color: var(--accent-blue); background: white; }
.form-group textarea { min-height: 120px; resize: vertical; }
.save-btn { width: 100%; background: var(--accent-blue); color: white; border: none; padding: 15px; border-radius: 8px; font-size: 1rem; font-weight: 700; cursor: pointer; margin-top: 10px; }
</style>
</head>
<body>

<header class="site-header">
  <img src="https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?auto=format&fit=crop&w=200&q=80" alt="Profile" class="profile-pic">
  <h1 class="site-title">Lena's Library</h1>
  <p class="site-subtitle">ë‚˜ë¥¼ êµ¬ì„±í•˜ëŠ” ë¬¸ì¥ë“¤ê³¼ ê¹Šì€ ì‚¬ìœ ì˜ ê¸°ë¡ë“¤. ì±… í‘œì§€ë¥¼ í´ë¦­í•˜ë©´ ìƒì„¸í•œ ë¶ë¦¬í¬íŠ¸ë¥¼ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
  
  <div class="google-search-container">
      <form action="https://www.google.com/search" method="GET" target="_blank" class="google-search-form" onsubmit="return true;">
          <button type="submit">ğŸ”</button>
          <input type="search" name="q" placeholder="ì±… ì •ë³´ êµ¬ê¸€ ê²€ìƒ‰..." required>
      </form>
  </div>

  <button class="btn-new" onclick="openForm()">+ ìƒˆë¡œìš´ ì±… ê¸°ë¡í•˜ê¸°</button>
</header>

<main class="container">
  <div class="book-grid" id="bookGrid">
    </div>
</main>

<div class="modal-overlay" id="detailModal">
  <div class="modal-content">
    <button class="close-btn" onclick="closeModal('detailModal')">Ã—</button>
    <div class="detail-layout" id="detailContent">
      </div>
  </div>
</div>

<div class="modal-overlay" id="formModal">
  <div class="modal-content">
    <button class="close-btn" onclick="closeModal('formModal')">Ã—</button>
    <h2 id="formTitle" style="font-family:'Playfair Display', serif; margin-bottom: 25px; text-align: center; color: var(--accent-blue);">Add a Book</h2>
    
    <div class="form-group">
      <label>ì±… ì œëª©</label>
      <input type="text" id="f-title" placeholder="ì˜ˆ: ì•ˆë‚˜ ì¹´ë ˆë‹ˆë‚˜">
    </div>
    <div class="form-group">
      <label>ì§€ì€ì´</label>
      <input type="text" id="f-author" placeholder="ì˜ˆ: ë ˆí”„ í†¨ìŠ¤í† ì´">
    </div>
    <div class="form-group">
      <label>ì±… í‘œì§€ ì´ë¯¸ì§€ URL</label>
      <input type="text" id="f-img" placeholder="http://... (ì´ë¯¸ì§€ ë§í¬ ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ê¸°)">
    </div>
    <div class="form-group">
      <label>ë°œì·Œ (ê¸°ì–µí•˜ê³  ì‹¶ì€ ë¬¸ì¥)</label>
      <textarea id="f-quote" placeholder="ì¸ìƒ ê¹Šì—ˆë˜ êµ¬ì ˆì„ ì ì–´ì£¼ì„¸ìš”."></textarea>
    </div>
    <div class="form-group">
      <label>ë‚˜ë§Œì˜ ë¶ë¦¬í¬íŠ¸ / ê°ìƒí‰</label>
      <textarea id="f-review" placeholder="ì ì§„ì ìœ¼ë¡œ ë“œëŸ¬ë‚˜ëŠ” ë‚´ë©´ì˜ ê¹Šì´ë‚˜, ì‚¬íšŒì  ë¶€ì¡°ë¦¬ì— ëŒ€í•œ ìƒê°ë“¤ì„ ììœ ë¡­ê²Œ ì ì–´ë³´ì„¸ìš”."></textarea>
    </div>
    <button class="save-btn" onclick="handleSave()">ê¸°ë¡ ì €ì¥í•˜ê¸°</button>
  </div>
</div>

<script>
const defaultBooks = [
  { id: 1, title: "ì•ˆë‚˜ ì¹´ë ˆë‹ˆë‚˜", author: "ë ˆí”„ í†¨ìŠ¤í† ì´", img: "https://images.unsplash.com/photo-1589829085413-56de8ae18c73?auto=format&fit=crop&w=600&q=80", quote: "í–‰ë³µí•œ ê°€ì •ì€ ëª¨ë‘ ì—‡ë¹„ìŠ·í•˜ê³ , ë¶ˆí–‰í•œ ê°€ì •ì€ ë¶ˆí–‰í•œ ì´ìœ ê°€ ì œê°ê¸° ë‹¤ë¥´ë‹¤.", review: "ì¸ê°„ ë³¸ì„±ì— ëŒ€í•œ ë‚ ì¹´ë¡œìš´ í†µì°°ë ¥. ìºë¦­í„°ì˜ ê²‰ëª¨ìŠµì´ ë²—ê²¨ì§€ë©° ì§„ì •í•œ ë‚´ë©´ì´ ë“œëŸ¬ë‚˜ëŠ” ê³¼ì •ì´ ì••ê¶Œì´ë‹¤." },
  { id: 2, title: "í˜¸ë°€ë°­ì˜ íŒŒìˆ˜ê¾¼", author: "J.D. ìƒë¦°ì €", img: "https://images.unsplash.com/photo-1544947950-fa07a98d237f?auto=format&fit=crop&w=600&q=80", quote: "ë‚˜ëŠ” ëŠ˜ ë„“ì€ í˜¸ë°€ë°­ì—ì„œ ê¼¬ë§ˆë“¤ì´ ì¬ë¯¸ìˆê²Œ ë†€ê³  ìˆëŠ” ëª¨ìŠµì„ ìƒìƒí•˜ê³¤ í–ˆì–´.", review: "ì‚¬íšŒì  ë¶€ì¡°ë¦¬ì™€ í—ˆìœ„ì— ëŒ€í•œ í™€ë“ ì˜ ì‹œì„ . ë³µì¡í•˜ê³  ì–´ì§€ëŸ¬ìš´ ì„¸ìƒ ì†ì—ì„œ ìˆœìˆ˜í•¨ì„ ì§€í‚¤ë ¤ëŠ” ëª¸ë¶€ë¦¼." }
];

let books = JSON.parse(localStorage.getItem('lena_premium_lib'));
if (!books || books.length === 0) {
    books = defaultBooks;
    localStorage.setItem('lena_premium_lib', JSON.stringify(books));
}

let currentEditId = null;

function renderGrid() {
    const grid = document.getElementById('bookGrid');
    grid.innerHTML = '';
    
    books.forEach(b => {
        const coverSrc = b.img || "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='300' viewBox='0 0 200 300'%3E%3Crect width='200' height='300' fill='%23f0f0f0'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-size='14px' fill='%23aaa'%3ENo Cover%3C/text%3E%3C/svg%3E";
        
        grid.innerHTML += `
            <div class="book-card" onclick="openDetail(${b.id})">
                <img src="${coverSrc}" class="book-cover" alt="cover">
                <div class="book-title">${b.title}</div>
                <div class="book-author">${b.author}</div>
            </div>
        `;
    });
}

function openModal(id) { document.getElementById(id).classList.add('open'); document.body.style.overflow = 'hidden'; }
function closeModal(id) { document.getElementById(id).classList.remove('open'); document.body.style.overflow = 'auto'; }

function openDetail(id) {
    const b = books.find(item => item.id === id);
    if(!b) return;
    
    const coverSrc = b.img || "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='300' viewBox='0 0 200 300'%3E%3Crect width='200' height='300' fill='%23f0f0f0'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-size='14px' fill='%23aaa'%3ENo Cover%3C/text%3E%3C/svg%3E";
    
    const content = document.getElementById('detailContent');
    content.innerHTML = `
        <img src="${coverSrc}" class="detail-cover">
        <h2 class="detail-title">${b.title}</h2>
        <div class="detail-author">${b.author}</div>
        
        ${b.quote ? `
        <div class="section-title">Highlight</div>
        <div class="detail-quote">"${b.quote}"</div>` : ''}
        
        ${b.review ? `
        <div class="section-title" style="text-align:left; width:100%; border-top:1px solid #eee; padding-top:20px;">Book Report</div>
        <div class="detail-review">${b.review}</div>` : ''}
        
        <div class="detail-actions">
            <button class="action-btn" onclick="openForm(${b.id})">ìˆ˜ì •í•˜ê¸°</button>
            <button class="action-btn delete" onclick="deleteBook(${b.id})">ì‚­ì œí•˜ê¸°</button>
        </div>
    `;
    
    openModal('detailModal');
}

function openForm(id = null) {
    currentEditId = id;
    if(id) {
        closeModal('detailModal');
        const b = books.find(item => item.id === id);
        document.getElementById('f-title').value = b.title;
        document.getElementById('f-author').value = b.author || '';
        document.getElementById('f-img').value = b.img || '';
        document.getElementById('f-quote').value = b.quote || '';
        document.getElementById('f-review').value = b.review || '';
        document.getElementById('formTitle').innerText = "Edit Book";
    } else {
        document.getElementById('f-title').value = '';
        document.getElementById('f-author').value = '';
        document.getElementById('f-img').value = '';
        document.getElementById('f-quote').value = '';
        document.getElementById('f-review').value = '';
        document.getElementById('formTitle').innerText = "Add a Book";
    }
    openModal('formModal');
}

function handleSave() {
    const title = document.getElementById('f-title').value;
    const author = document.getElementById('f-author').value;
    const img = document.getElementById('f-img').value;
    const quote = document.getElementById('f-quote').value;
    const review = document.getElementById('f-review').value;

    if(!title) return alert("ì±… ì œëª©ì€ ê¼­ ì…ë ¥í•´ ì£¼ì„¸ìš”.");

    const data = { id: currentEditId || Date.now(), title, author, img, quote, review };

    if(currentEditId) {
        const idx = books.findIndex(b => b.id === currentEditId);
        books[idx] = data;
    } else {
        books.unshift(data);
    }
    
    localStorage.setItem('lena_premium_lib', JSON.stringify(books));
    renderGrid();
    closeModal('formModal');
    if(currentEditId) openDetail(currentEditId);
}

function deleteBook(id) {
    if(!confirm("ì´ ê¸°ë¡ì„ ì™„ì „íˆ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
    books = books.filter(b => b.id !== id);
    localStorage.setItem('lena_premium_lib', JSON.stringify(books));
    closeModal('detailModal');
    renderGrid();
}

renderGrid();
</script>
</body>
</html>
